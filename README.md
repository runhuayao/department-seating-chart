# éƒ¨é—¨åœ°å›¾ç³»ç»Ÿ (Department Map System)

ä¸€ä¸ªåŸºäºReact + Express.jsçš„ç°ä»£åŒ–éƒ¨é—¨åœ°å›¾ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå·¥ä½ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€å®æ—¶æ•°æ®åŒæ­¥ç­‰åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“ **äº¤äº’å¼åœ°å›¾** - å¯è§†åŒ–éƒ¨é—¨å¸ƒå±€å’Œå·¥ä½åˆ†å¸ƒ
- ğŸ‘¥ **å·¥ä½ç®¡ç†** - æ”¯æŒå·¥ä½çš„å¢åˆ æ”¹æŸ¥æ“ä½œ
- ğŸ” **æ™ºèƒ½æœç´¢** - æŒ‰äººåæˆ–å·¥ä½å¿«é€Ÿå®šä½
- ğŸ” **ç”¨æˆ·è®¤è¯** - JWTåŸºç¡€çš„å®‰å…¨è®¤è¯ç³»ç»Ÿ
- ğŸ“Š **ç®¡ç†åå°** - å®Œæ•´çš„åå°ç®¡ç†ç•Œé¢
- ğŸ”„ **å®æ—¶åŒæ­¥** - WebSocketå®ç°æ•°æ®å®æ—¶æ›´æ–°

### æŠ€æœ¯ç‰¹æ€§
- ğŸ›¡ï¸ **å®‰å…¨æœºåˆ¶** - APIè®¤è¯ã€æ•°æ®åŠ å¯†ã€SQLæ³¨å…¥é˜²æŠ¤
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ”§ **æ¨¡å—åŒ–æ¶æ„** - å‰åç«¯åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–** - è¿æ¥æ± ã€ç¼“å­˜ã€é”™è¯¯å¤„ç†

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
éƒ¨é—¨åœ°å›¾/
â”œâ”€â”€ src/                          # å‰ç«¯æºç ç›®å½•
â”‚   â”œâ”€â”€ components/               # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Map/                 # åœ°å›¾ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ WorkStation/         # å·¥ä½ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Search/              # æœç´¢åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Admin/               # ç®¡ç†åå°ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/                # Reactä¸Šä¸‹æ–‡
â”‚   â”‚   â””â”€â”€ AuthContext.tsx     # ç”¨æˆ·è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰Reacté’©å­
â”‚   â”œâ”€â”€ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.tsx           # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx       # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â””â”€â”€ Admin.tsx           # ç®¡ç†åå°
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ api.ts              # APIè°ƒç”¨å°è£…
â”‚   â”‚   â””â”€â”€ helpers.ts          # è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ App.tsx                  # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx                # åº”ç”¨å…¥å£
â”œâ”€â”€ api/                         # åç«¯æœåŠ¡å™¨ç›®å½•
â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database.ts         # æ•°æ®åº“é…ç½®å’Œè¿æ¥
â”‚   â”‚   â””â”€â”€ auth.ts             # è®¤è¯é…ç½®
â”‚   â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ cors.ts             # CORSé…ç½®
â”‚   â”‚   â””â”€â”€ security.ts         # å®‰å…¨ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ routes/                  # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ workstations.ts     # å·¥ä½ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ users.ts            # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚   â””â”€â”€ departments.ts      # éƒ¨é—¨ç®¡ç†API
â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ utils/                   # åç«¯å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ server.ts               # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ shared/                      # å‰åç«¯å…±äº«ç±»å‹å®šä¹‰
â”œâ”€â”€ public/                      # é™æ€èµ„æº
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ package.json                 # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ vite.config.ts              # Viteé…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScripté…ç½®
â”œâ”€â”€ tailwind.config.js          # Tailwind CSSé…ç½®
â”œâ”€â”€ CHANGELOG.md                # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Vite** - å¿«é€Ÿçš„æ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Router** - å®¢æˆ·ç«¯è·¯ç”±

### åç«¯æŠ€æœ¯
- **Node.js** - JavaScriptè¿è¡Œæ—¶
- **Express.js** - Webåº”ç”¨æ¡†æ¶
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **JWT** - JSON Web Tokenè®¤è¯
- **bcrypt** - å¯†ç åŠ å¯†
- **WebSocket** - å®æ—¶é€šä¿¡

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **Git** - ç‰ˆæœ¬æ§åˆ¶
- **npm/pnpm** - åŒ…ç®¡ç†å™¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- npm >= 8.0.0 æˆ– pnpm >= 7.0.0
- MySQL >= 8.0 (å¯é€‰ï¼Œæ”¯æŒå†…å­˜æ¨¡å¼)

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨npm
npm install

# æˆ–ä½¿ç”¨pnpm
pnpm install
```

### ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=department_map

# JWTé…ç½®
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=24h

# æœåŠ¡å™¨é…ç½®
PORT=8080
NODE_ENV=development
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (é»˜è®¤ç«¯å£: 5173)
npm run dev

# å¯åŠ¨åç«¯æœåŠ¡å™¨ (é»˜è®¤ç«¯å£: 8080)
npm run server:dev

# åŒæ—¶å¯åŠ¨å‰åç«¯
npm run dev:full
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºåç«¯
npm run build:server

# æ„å»ºå®Œæ•´é¡¹ç›®
npm run build:all
```

## ğŸ“– APIæ–‡æ¡£

### è®¤è¯ç›¸å…³
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/refresh` - åˆ·æ–°Token
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º

### å·¥ä½ç®¡ç†
- `GET /api/workstations` - è·å–å·¥ä½åˆ—è¡¨
- `POST /api/workstations` - åˆ›å»ºæ–°å·¥ä½
- `PUT /api/workstations/:id` - æ›´æ–°å·¥ä½ä¿¡æ¯
- `DELETE /api/workstations/:id` - åˆ é™¤å·¥ä½

### ç”¨æˆ·ç®¡ç†
- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `GET /api/users/:id` - è·å–ç”¨æˆ·è¯¦æƒ…
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·

### éƒ¨é—¨ç®¡ç†
- `GET /api/departments` - è·å–éƒ¨é—¨åˆ—è¡¨
- `POST /api/departments` - åˆ›å»ºæ–°éƒ¨é—¨
- `PUT /api/departments/:id` - æ›´æ–°éƒ¨é—¨ä¿¡æ¯
- `DELETE /api/departments/:id` - åˆ é™¤éƒ¨é—¨

## ğŸ” å®‰å…¨ç‰¹æ€§

### è®¤è¯ä¸æˆæƒ
- JWT Tokenè®¤è¯
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)
- Tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- å®‰å…¨çš„å¯†ç å­˜å‚¨(bcrypt)

### æ•°æ®å®‰å…¨
- SQLæ³¨å…¥é˜²æŠ¤
- XSSæ”»å‡»é˜²æŠ¤
- CSRFä¿æŠ¤
- æ•°æ®ä¼ è¾“åŠ å¯†

### æœåŠ¡å™¨å®‰å…¨
- CORSé…ç½®
- å®‰å…¨HTTPå¤´
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- è¾“å…¥éªŒè¯å’Œæ¸…ç†

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“¦ éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºDockeré•œåƒ
docker build -t department-map .

# è¿è¡Œå®¹å™¨
docker run -p 8080:8080 department-map
```

### ä¼ ç»Ÿéƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:all

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ªESLintå’ŒPrettieré…ç½®
- ç¼–å†™æ¸…æ™°çš„æäº¤ä¿¡æ¯
- æ·»åŠ å¿…è¦çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [FAQ](docs/FAQ.md)
2. æœç´¢ç°æœ‰çš„ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ [Issue](../../issues/new)
4. è”ç³»ç»´æŠ¤å›¢é˜Ÿ

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ
- âœ… å®‰å…¨æœºåˆ¶å®ç°
- âœ… æ–‡æ¡£å®Œå–„
- ğŸ”„ æŒç»­ä¼˜åŒ–ä¸­

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ã€‚

---

**ç‰ˆæœ¬**: v2.0.0  
**æœ€åæ›´æ–°**: 2024-01-15  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ